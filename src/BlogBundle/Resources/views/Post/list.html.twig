{% extends "::public_base.html.twig" %}

{% block title %}Blog{% endblock %}

{% block content %}
    <section>
        <div class="row">
            {% for post in posts %}
                {% set title = post.localizedTitle(app.request.get('_locale')) %}
                {% set abstract = post.localizedAbstract(app.request.get('_locale')) %}
                {% set slug  = post.localizedSlug(app.request.get('_locale')) %}

                <div class="col-sm-6 col-md-4 post">
                    <div class="thumbnail">
                        <div class="crop">
                            <a href="{{ path('blog_post_details', {'slug': slug}) }}" title="{{ title }}">
                                <img src="{{ post.cover }}" alt="{{ title }}" class="img-responsive"/>
                            </a>
                        </div>
                        <div class="caption">
                            <h3>
                                <a href="{{ path('blog_post_details', {'slug': slug}) }}" title="{{ title }}">
                                    {{ title }}
                                </a>
                            </h3>
                            <p class="abstract">
                                {{ abstract|truncate(250, true) }}
                            </p>
                            <div class="row info">
                                <div class="col-xs-6 text-left">
                                    <span class="label label-primary">{{ ('blog.post.enum.category.' ~ post.category)|trans }}</span>
                                </div>
                                <div class="col-xs-6 text-right">
                                    {{ post.localizedPublicationDate }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>
{% endblock %}
